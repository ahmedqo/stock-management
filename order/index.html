<html>
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<link rel="stylesheet" href="../styles/GO.1.0.css" />
		<link rel="stylesheet" href="../styles/GOfont/style.css" />
		<title>Orders | GALINI</title>
	</head>
	<body>
		<div id="head"></div>
		<div class="block justify-content-end">
			<div class="col-max hidden-sm hidden-md">
				<ul class="list">
					<li class="list-item">
						<a href="#" class="link">
							<span class="icon icon-lg icon-blank">
							</span>
						</a>
					</li>
				</ul>
			</div>
			<div class="col">
				<div class="col-12">
					<div
						id="list"
						class="block align-items-center justify-content-between"
					>
						<div class="col-max">
							<h1 class="title-three">
								<i
									class="GO-list"
									style="font-size: 32px;"
								></i>
								Liste Produit
							</h1>
						</div>
						<div class="col-max">
							<a
								href="#new"
								id="showAdd"
								class="icon icon-lg icon-primary"
							>
								<i class="GO-plus"></i>
							</a>
						</div>
						<div class="break-five"></div>
						<form id="searchForm" class="block">
							<div class="col">
								<input
									id="searchBox"
									name="searchBox"
									type="search"
									class="formbox formbox-lg horizontal-fluid margin-bottom-six"
									placeholder="Recherche...."
								/>
							</div>
							<div class="col-max">
								<a
									href="#valid"
									onclick="getAll(undefined,'1')"
									class="icon icon-lg icon-success"
								>
									<i class="GO-checkbox"></i>
								</a>
							</div>
							<div class="col-max">
								<a
									href="#invalid"
									onclick="getAll(undefined,'0')"
									class="icon icon-lg icon-danger"
								>
									<i class="GO-ban"></i>
								</a>
							</div>
						</form>
						<div class="col-12">
							<table
								class="table horizontal-fluid table-primary txt-center"
							>
								<thead>
									<tr>
										<td>Client</td>
										<td>Total</td>
										<td>Type Paiement</td>
										<td>Date</td>
										<td>Status</td>
										<td>Options</td>
									</tr>
								</thead>
								<tbody id="searchResult">
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
									<tr>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
										<td>
											<div
												class="col-12 loader padding-five"
											></div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div
						id="add"
						class="block align-items-center justify-content-between"
					>
						<div class="col-max">
							<h1 class="title-three">
								<i
									class="GO-plus-square"
									style="font-size: 32px;"
								></i>
								Nouveau Produit
							</h1>
						</div>
						<div class="col-max">
							<span
								id="hideAdd"
								class="icon icon-lg icon-danger"
							>
								<i class="GO-times"></i>
							</span>
						</div>
						<div class="break-five"></div>
						<form
							id="addForm"
							class="block align-items-center justify-content-between"
						>
							<div class="col-12">
								<h1 class="title-five">
									Nom Client
								</h1>
							</div>
							<div class="col-12">
								<input
									type="text"
									id="nameAdd"
									name="nameAdd"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Nom Client"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Telephone
								</h1>
							</div>
							<div class="col-12">
								<input
									type="text"
									id="phoneAdd"
									name="phoneAdd"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Telephone"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Adresse
								</h1>
							</div>
							<div class="col-12">
								<textarea
									row="3"
									id="addressAdd"
									name="addressAdd"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Adresse"
								></textarea>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Produits
								</h1>
							</div>
							<input type="hidden" id="quantiteAdd" />
							<input type="hidden" id="prixAdd" />
							<div class="block align-items-center">
								<div class="col-9 sm-12 md-12">
									<select
										id="productsAdd"
										class="formbox formbox-lg horizontal-fluid"
									>
										<option selected disabled>
											Produit
										</option>
									</select>
								</div>
								<div class="col-2 sm-9 md-10">
									<input
										type="number"
										id="quantityAdd"
										class="col formbox formbox-lg horizontal-fluid txt-center"
										placeholder="Quantite"
									/>
								</div>
								<div class="col-1 sm-3 md-2">
									<span
										id="rowAdd"
										class="icon icon-lg icon-primary horizontal-fluid"
									>
										<i class="GO-plus txt"></i>
									</span>
								</div>
							</div>
							<div class="col-12">
								<table
									class="table table-primary horizontal-fluid txt-center"
								>
									<thead>
										<tr>
											<td>Nom</td>
											<td>Quantite</td>
											<td>Prix</td>
											<td>Total</td>
											<td>Options</td>
										</tr>
									</thead>
									<tbody id="rowsAdd"></tbody>
								</table>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Total
								</h1>
							</div>
							<div class="col-12">
								<input
									type="number"
									id="totalAdd"
									name="totalAdd"
									class="formbox formbox-lg horizontal-fluid"
									value="0"
									readonly
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Type Paiement
								</h1>
							</div>
							<div class="col-12">
								<select
									id="paymentAdd"
									name="paymentAdd"
									class="formbox formbox-lg horizontal-fluid"
								>
									<option selected disabled
										>Type Paiement</option
									>
									<option value="cheque"
										>Check</option
									>
									<option value="Credit Card"
										>Credit Card</option
									>
									<option value="Cash">Cash</option>
								</select>
							</div>
							<div class="col-12">
								<button
									type="submit"
									class="btn btn-lg btn-primary horizontal-fluid"
								>
									Ajouter
								</button>
							</div>
						</form>
					</div>
					<div
						id="edit"
						class="block align-items-center justify-content-between"
					>
						<div class="col-max">
							<h1 class="title-three">
								<i
									class="GO-cog"
									style="font-size: 32px;"
								></i>
								Editer Produit
							</h1>
						</div>
						<div class="col-max">
							<span
								id="hideEdit"
								class="icon icon-lg icon-danger"
							>
								<i class="GO-times"></i>
							</span>
						</div>
						<div class="break-five"></div>
						<form
							id="editForm"
							class="block align-items-center justify-content-between"
						>
							<input
								type="hidden"
								name="idEdit"
								id="idEdit"
							/>
							<div class="col-12">
								<h1 class="title-five">
									Nom Client
								</h1>
							</div>
							<div class="col-12">
								<input
									type="text"
									id="nameEdit"
									name="nameEdit"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Nom Client"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Telephone
								</h1>
							</div>
							<div class="col-12">
								<input
									type="text"
									id="phoneEdit"
									name="phoneEdit"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Telephone"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Adresse
								</h1>
							</div>
							<div class="col-12">
								<textarea
									row="3"
									id="addressEdit"
									name="addressEdit"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Adresse"
								></textarea>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Produits
								</h1>
							</div>
							<input type="hidden" id="quantiteEdit" />
							<input type="hidden" id="prixEdit" />
							<div class="block align-items-center">
								<div class="col-9 sm-12 md-12">
									<select
										id="productsEdit"
										class="formbox formbox-lg horizontal-fluid"
									>
										<option selected disabled>
											Produit
										</option>
									</select>
								</div>
								<div class="col-2 sm-9 md-10">
									<input
										type="number"
										id="quantityEdit"
										class="col formbox formbox-lg horizontal-fluid txt-center"
										placeholder="Quantite"
									/>
								</div>
								<div class="col-1 sm-3 md-2">
									<span
										id="rowEdit"
										class="icon icon-lg icon-primary horizontal-fluid"
									>
										<i class="GO-plus txt"></i>
									</span>
								</div>
							</div>
							<div class="col-12">
								<table
									class="table table-primary horizontal-fluid txt-center"
								>
									<thead>
										<tr>
											<td>Nom</td>
											<td>Quantite</td>
											<td>Prix</td>
											<td>Total</td>
											<td>Options</td>
										</tr>
									</thead>
									<tbody id="rowsEdit"></tbody>
								</table>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Total
								</h1>
							</div>
							<div class="col-12">
								<input
									type="number"
									id="totalEdit"
									name="totalEdit"
									class="formbox formbox-lg horizontal-fluid"
									value="0"
									readonly
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Type Paiement
								</h1>
							</div>
							<div class="col-12">
								<select
									id="paymentEdit"
									name="paymentEdit"
									class="formbox formbox-lg horizontal-fluid"
								>
									<option selected disabled
										>Type Paiement</option
									>
									<option value="cheque"
										>Check</option
									>
									<option value="Credit Card"
										>Credit Card</option
									>
									<option value="Cash">Cash</option>
								</select>
							</div>
							<div class="col-12">
								<button
									type="submit"
									class="btn btn-lg btn-primary horizontal-fluid"
								>
									Enregister
								</button>
							</div>
						</form>
					</div>
					<div id="printForm" class="block hidden">
						<div
							class="block justify-content-between align-items-center padding-horizontal-four padding-top-four"
						>
							<div class="col-5">
								<h1 class="title-six">
									GALINI Technologie
								</h1>
								<h3>
									46. Avenue Okba, N°2, Agdal, Rabat
								</h3>
								<h3>contact@galinitech.com</h3>
								<h3>06.08.48.16.44</h3>
							</div>
							<div class="col-2">
								<img
									src="../assets/g.png"
									style="
										display: block;
										width: 100%;
									"
								/>
							</div>
						</div>
						<div class="break-three"></div>
						<div class="block padding-horizontal-four">
							<div class="col-6 padding-none">
								<div class="block">
									<table>
										<tr>
											<td
												style="
													padding: 5px 0;
													width: 26%;
												"
											>
												<h1>Status</h1>
											</td>
											<td
												id="statusPrint"
											></td>
										</tr>
										<tr>
											<td
												style="
													padding: 5px 0;
												"
											>
												<h1>Nom</h1>
											</td>
											<td id="namePrint"></td>
										</tr>
										<tr>
											<td
												style="
													padding: 5px 0;
												"
											>
												<h1>Telephone</h1>
											</td>
											<td id="phonePrint"></td>
										</tr>
										<tr>
											<td
												style="
													padding: 5px 0;
												"
											>
												<h1>Adresse</h1>
											</td>
											<td
												id="addressPrint"
											></td>
										</tr>
										<tr>
											<td
												style="
													padding: 5px 0;
												"
											>
												<h1>Date</h1>
											</td>
											<td id="datePrint"></td>
										</tr>
									</table>
								</div>
							</div>
						</div>
						<div class="break-three"></div>
						<div class="block padding-horizontal-four">
							<div class="block horizontal-fluid">
								<div class="col-6 txt-center">
									<h3>Produit</h3>
								</div>
								<div class="col-2 txt-center">
									<h3>Quantite</h3>
								</div>
								<div class="col-2 txt-center">
									<h3>Prix</h3>
								</div>
								<div class="col-2 txt-center">
									<h3>Total</h3>
								</div>
								<div class="col-12"><hr /></div>
							</div>
							<div
								id="rowsPrint"
								class="block horizontal-fluid"
							></div>
							<div
								class="block horizontal-fluid justify-content-end align-items-center"
							>
								<div class="col-2 txt-center">
									<h3>Total</h3>
								</div>
								<div
									id="totalPrint"
									class="col-2 txt-center"
								></div>
								<div style="width: 100%;"></div>
								<div class="col-4">
									<hr />
								</div>
								<div style="width: 100%;"></div>
								<div class="col-2 txt-center">
									<h3>Payer Par</h3>
								</div>
								<div
									id="paymentPrint"
									class="col-2 txt-center"
								></div>
								<div style="width: 100%;"></div>
								<div class="col-4">
									<hr />
								</div>
								<div style="width: 100%;"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../scripts/GO.1.0.js"></script>
		<script src="../scripts/CODE.0.0.js"></script>
		<script src="../scripts/CODE.0.1.js"></script>
		<script>
			let Row = function (id, name, type, total, date, status) {
				let Class = (icon = "");
				if (parseInt(status)) {
					status = "Complete";
					Class = "tag-success";
					icon = "GO-ban";
				} else {
					status = "Annuler";
					Class = "tag-danger";
					icon = "GO-checkbox";
				}
				return `<tr>
							<td data-title="Nom">
								${name}
							</td>
							<td data-title="Total">
								${total} MAD
							</td>
							<td data-title="Type Paiement">
								${type}
							</td>
							<td data-title="Date">
								${date}
							</td>
							<td data-title="Statuts">
								<span
									class="tag ${Class}"
								>
									${status}
								</span>
							</td>
							<td data-title="Options">
								<a
									id="${id}"
									onclick="showEdit(this)"
									class="icon icon-sm icon-bold"
								>
									<i
										class="GO-edit"
									></i>
								</a>
								<a
									id="${id}"
									onclick="Print(this)"
									class="icon icon-sm icon-bold"
								>
									<i
										class="GO-print"
									></i>
								</a>
								<a
									id="${id}"
									onclick="changeStatus(this)"
									class="icon icon-sm icon-bold"
								>
									<i
										class="${icon}"
									></i>
								</a>
							</td>
						</tr>`;
			};
			let getAll = function (search, status) {
				if (search === undefined) {
					search = "";
				}
				if (status === undefined) {
					status = "";
				}
				GO.ajax({
					url: "../libs/getOrders.php",
					method: "POST",
					data: {
						search: search,
						status: status,
					},
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Orders: Error");
						} else {
							console.info("Get Orders: Success");
							GO("#searchResult").html("");
							if (data["message"] === true) {
								GO("#searchResult").append(
									`<tr><td colspan="7">Aucun Data Trouve</td></tr>`
								);
							} else {
								Array.from(data["message"]).forEach(
									(r) => {
										let row = Row(
											r[0],
											r[2],
											r[6],
											r[5],
											r[1],
											r[7]
										);
										GO("#searchResult").append(
											row
										);
									}
								);
							}
						}
					},
				});
			};
			let products = function (target) {
				GO.ajax({
					url: "../libs/getProducts.php",
					method: "POST",
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Products: Error");
						} else {
							console.info("Get Products: Success");
							Array.from(data["message"]).forEach((b) => {
								if (parseInt(b[7]) === 1) {
									GO(target).append(
										`<option value="${b[0]}">${b[1]}</option>`
									);
								}
							});
						}
					},
				});
			};
			let product = function (id, t1, t2) {
				GO.ajax({
					url: "../libs/getProduct.php",
					method: "POST",
					data: { id: id },
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Product: Error");
						} else {
							console.info("Get Product: Success");
							GO(t1).val(
								data["message"]["quantite_produit"]
							);
							GO(t2).val(data["message"]["prix_produit"]);
						}
					},
				});
			};
			let delAdd = function (e) {
				let total = parseInt(GO(e).parent().prev().text());
				let subtotal = parseInt(GO("#totalAdd").val());
				GO("#totalAdd").val(subtotal - total);
				GO(e).parent().parent().remove();
			};
			let delEdit = function (e) {
				let total = parseInt(GO(e).parent().prev().text());
				let subtotal = parseInt(GO("#totalEdit").val());
				GO("#totalEdit").val(subtotal - total);
				GO(e).parent().parent().remove();
			};
			let itemAdd = function (val, qte, price, total, text) {
				return `<tr>
							<input type="hidden" name="produitAdd[]" value="${val}">
							<input type="hidden" name="quantiteAdd[]" value="${qte}">
							<input type="hidden" name="prixAdd[]" value="${price}">
							<td data-title="Nom">${text}</td>
							<td data-title="Quantite">${qte}</td>
							<td data-title="Prix">${price} MAD</td>
							<td data-title="Total">${total} MAD</td>
							<td data-title="Options">
								<a
									onclick="delAdd(this)"
									class="icon icon-md icon-danger"
								>
									<i class="GO-trash"></i>
								</a>
							</td>
						</tr>`;
			};
			let itemEdit = function (val, qte, price, total, text) {
				return `<tr>
							<input type="hidden" name="produitEdit[]" value="${val}">
							<input type="hidden" name="quantiteEdit[]" value="${qte}">
							<input type="hidden" name="prixEdit[]" value="${price}">
							<td data-title="Nom">${text}</td>
							<td data-title="Quantite">${qte}</td>
							<td data-title="Prix">${price} MAD</td>
							<td data-title="Total">${total} MAD</td>
							<td data-title="Options">
								<a
									onclick="delEdit(this)"
									class="icon icon-md icon-danger"
								>
									<i class="GO-trash"></i>
								</a>
							</td>
						</tr>`;
			};
			let itemPrint = function (val, qte, price, total, text) {
				return `
							<div class="col-6 txt-center">${text}</div>
							<div class="col-2 txt-center">${qte}</div>
							<div class="col-2 txt-center">${price} MAD</div>
							<div class="col-2 txt-center">${total} MAD</div>
							<div class="col-12"><hr></div>
						`;
			};
			let showEdit = function (e) {
				let id = GO(e).attr("id");
				GO.ajax({
					url: "../libs/getOrder.php",
					method: "POST",
					data: { id: id },
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Order: Error");
						} else {
							console.info("Get Order: Success");
							itemsEdit(id);
							GO("#idEdit").val(data["message"][0]);
							GO("#nameEdit").val(data["message"][2]);
							GO("#phoneEdit").val(data["message"][3]);
							GO("#addressEdit").val(data["message"][4]);
							GO("#totalEdit").val(data["message"][5]);
							let payment = document.getElementById(
								"paymentEdit"
							).options;
							Array.from(payment).forEach((b) => {
								if (b.value === data["message"][6]) {
									b.selected = "selected";
								}
							});
							GO("#list").css({ display: "none" });
							GO("#edit").css({ display: "" });
						}
					},
				});
			};
			let Print = function (e) {
				let id = GO(e).attr("id");
				GO.ajax({
					url: "../libs/getOrder.php",
					method: "POST",
					data: { id: id },
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Order: Error");
						} else {
							console.info("Get Order: Success");
							itemsPrint(id);
							GO("#datePrint").text(data["message"][1]);
							GO("#namePrint").text(data["message"][2]);
							GO("#phonePrint").text(data["message"][3]);
							GO("#addressPrint").text(data["message"][4]);
							GO("#totalPrint").text(
								data["message"][5] + " MAD"
							);
							GO("#paymentPrint").text(data["message"][6]);
							if (data["message"][7]) {
								GO("#statusPrint").text("Complete");
							} else {
								GO("#statusPrint").text("Annuler");
							}
							setTimeout(() => {
								var divContents = document.getElementById(
									"printForm"
								).innerHTML;
								var printWindow = window.open(
									"",
									"",
									"height=558.58,width=1500"
								);
								printWindow.document.write(
									`<html><head><link rel="stylesheet" href="../styles/GO.1.0.css" /></head><body>`
								);
								printWindow.document.write(divContents);
								printWindow.document.write(
									"</body></html>"
								);
								printWindow.document.close();
								printWindow.print();
							}, 100);
						}
					},
				});
			};
			let itemsEdit = function (id) {
				GO.ajax({
					url: "../libs/getItems.php",
					method: "POST",
					data: {
						id: id,
					},
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Items: Error");
						} else {
							console.info("Get Items: Success");
							GO("#rowsEdit").html("");
							Array.from(data["message"]).forEach((b) => {
								GO("#rowsEdit").append(
									itemEdit(
										b[2],
										b[3],
										b[4],
										b[5],
										b[8]
									)
								);
							});
						}
					},
				});
			};
			let itemsPrint = function (id) {
				GO.ajax({
					url: "../libs/getItems.php",
					method: "POST",
					data: {
						id: id,
					},
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Items: Error");
						} else {
							console.info("Get Items: Success");
							GO("#rowsPrint").html("");
							Array.from(data["message"]).forEach((b) => {
								GO("#rowsPrint").append(
									itemPrint(
										b[2],
										b[3],
										b[4],
										b[5],
										b[8]
									)
								);
							});
						}
					},
				});
			};
			let changeStatus = function (e) {
				let id = GO(e).attr("id");
				let status = GO(e).find("i").attr("class");
				if (status === "GO-ban") {
					status = 0;
				} else {
					status = 1;
				}
				GO.ajax({
					url: "../libs/statusOrder.php",
					method: "POST",
					data: {
						id: id,
						status: status,
					},
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Status Order: Error");
							GO(".alert").removeClass("alert-success");
							GO(".alert").addClass("alert-danger");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
						} else {
							console.info("Status Order: Success");
							GO(".alert").removeClass("alert-danger");
							GO(".alert").addClass("alert-success");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
							getAll();
						}
					},
				});
			};
			window.onload = function () {
				getAll();
				products("#productsAdd");
				products("#productsEdit");
			};
			GO("#head").include("../head.html");
			GO("#searchBox").on("keyup", function () {
				getAll(GO(this).val(), undefined);
			});
			GO("#rowAdd").click(function () {
				let proval = GO("#productsAdd").val();
				product(proval, "#quantiteAdd", "#prixAdd");
				setTimeout(() => {
					let protext = GO("#productsAdd").text();
					let qte = parseInt(GO("#quantityAdd").val());
					let subtotal = parseInt(GO("#totalAdd").val());
					let Qte = GO("#quantiteAdd").val();
					let price = parseFloat(GO("#prixAdd").val());
					if (qte <= Qte && qte !== "") {
						let total = qte * price;
						GO("#quantityAdd").css({ "border-color": "" });
						GO("#totalAdd").val(subtotal + total);
						GO("#rowsAdd").append(
							itemAdd(proval, qte, price, total, protext)
						);
					} else {
						GO("#quantityAdd").css({ "border-color": "red" });
						GO(".alert").removeClass("alert-success");
						GO(".alert").addClass("alert-danger");
						GO(".alert")
							.find("p")
							.html(
								"Quantity Must Be Less Than Or Equals " +
									Qte
							);
						GO(".alert").parent().css({ display: "" });
					}
				}, 100);
			});
			GO("#rowEdit").click(function () {
				let proval = GO("#productsEdit").val();
				product(proval, "#quantiteEdit", "#prixEdit");
				setTimeout(() => {
					let protext = GO("#productsEdit").text();
					let qte = parseInt(GO("#quantityEdit").val());
					let subtotal = parseInt(GO("#totalEdit").val());
					let Qte = GO("#quantiteEdit").val();
					let price = parseFloat(GO("#prixEdit").val());
					if (qte <= Qte && qte !== "") {
						let total = qte * price;
						GO("#quantityEdit").css({ "border-color": "" });
						GO("#totalEdit").val(subtotal + total);
						GO("#rowsEdit").append(
							itemEdit(proval, qte, price, total, protext)
						);
					} else {
						GO("#quantityEdit").css({
							"border-color": "red",
						});
						GO(".alert").removeClass("alert-success");
						GO(".alert").addClass("alert-danger");
						GO(".alert")
							.find("p")
							.html(
								"Quantity Must Be Less Than Or Equals " +
									Qte
							);
						GO(".alert").parent().css({ display: "" });
					}
				}, 100);
			});
			GO("#editForm").submit(function (e) {
				e.preventDefault();
				let proceed = false;
				if (GO("#nameEdit").val()) {
					GO("#nameEdit").css({ "border-color": "" });
				} else {
					GO("#nameEdit").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#phoneEdit").val()) {
					GO("#phoneEdit").css({ "border-color": "" });
				} else {
					GO("#phoneEdit").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#adressEdit").val()) {
					GO("#adressEdit").css({ "border-color": "" });
				} else {
					GO("#adressEdit").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#totalEdit").val() > 0) {
					GO("#totalEdit").css({ "border-color": "" });
				} else {
					GO("#totalEdit").css({ "border-color": "red" });
					proceed = true;
				}
				if (proceed) {
					GO(".alert").removeClass("alert-success");
					GO(".alert").addClass("alert-danger");
					GO(".alert").find("p").html("All Fields Are Required");
					GO(".alert").parent().css({ display: "" });
					return;
				}
				GO.ajax({
					url: "../libs/resetOrder.php",
					method: "POST",
					data: new FormData(
						document.getElementById("editForm")
					),
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("New Order: Error");
							GO(".alert").removeClass("alert-success");
							GO(".alert").addClass("alert-danger");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
						} else {
							console.info("New Order: Success");
							GO(".alert").removeClass("alert-danger");
							GO(".alert").addClass("alert-success");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
							getAll();
						}
					},
				});
			});
			GO("#addForm").submit(function (e) {
				e.preventDefault();
				let proceed = false;
				if (GO("#nameAdd").val()) {
					GO("#nameAdd").css({ "border-color": "" });
				} else {
					GO("#nameAdd").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#phoneAdd").val()) {
					GO("#phoneAdd").css({ "border-color": "" });
				} else {
					GO("#phoneAdd").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#addressAdd").val()) {
					GO("#addressAdd").css({ "border-color": "" });
				} else {
					GO("#addressAdd").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#totalAdd").val() > 0) {
					GO("#totalAdd").css({ "border-color": "" });
				} else {
					GO("#totalAdd").css({ "border-color": "red" });
					proceed = true;
				}
				if (GO("#paymentAdd").val() !== "Type Paiement") {
					GO("#paymentAdd").css({ "border-color": "" });
				} else {
					GO("#paymentAdd").css({ "border-color": "red" });
					proceed = true;
				}
				if (proceed) {
					GO(".alert").removeClass("alert-success");
					GO(".alert").addClass("alert-danger");
					GO(".alert").find("p").html("All Fields Are Required");
					GO(".alert").parent().css({ display: "" });
					return;
				}
				GO.ajax({
					url: "../libs/setOrder.php",
					method: "POST",
					data: new FormData(document.getElementById("addForm")),
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("New Order: Error");
							GO(".alert").removeClass("alert-success");
							GO(".alert").addClass("alert-danger");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
						} else {
							console.info("New Order: Success");
							GO(".alert").removeClass("alert-danger");
							GO(".alert").addClass("alert-success");
							GO(".alert").find("p").html(data["message"]);
							GO(".alert").parent().css({ display: "" });
							getAll();
						}
					},
				});
			});
		</script>
	</body>
</html>
