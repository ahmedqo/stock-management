<html>
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<link rel="stylesheet" href="../styles/GO.1.0.css" />
		<link rel="stylesheet" href="../styles/GOfont/style.css" />
		<title>Home | GALINI</title>
	</head>
	<body>
		<div id="head"></div>
		<div class="block justify-content-end">
			<div class="col-max hidden-sm hidden-md">
				<ul class="list">
					<li class="list-item">
						<a href="#" class="link">
							<span class="icon icon-lg icon-blank">
							</span>
						</a>
					</li>
				</ul>
			</div>
			<div class="col">
				<div class="col-12">
					<div class="block">
						<div class="col-12">
							<h1 class="title-three">
								<i
									class="GO-info-circle"
									style="font-size: 32px;"
								></i>
								Informations General
							</h1>
						</div>
						<div class="break-five"></div>
						<div class="col-6 sm-12">
							<div
								class="block justify-content-between align-items-center bg-success-light"
							>
								<span class="btn btn-lg btn-blank">
									<i
										class="GO-wallet txt-success"
										style="font-size: 50px;"
									></i>
								</span>
								<span class="btn btn-lg btn-blank">
									<span
										id="money"
										class="tag tag-rounded tag-success"
									>
										100
									</span>
								</span>
							</div>
						</div>
						<div class="col-6 sm-12">
							<div
								class="block justify-content-between align-items-center bg-primary-light"
							>
								<span class="btn btn-lg btn-blank">
									<i
										class="GO-cart txt-primary"
										style="font-size: 50px;"
									></i>
								</span>
								<span class="btn btn-lg btn-blank">
									<span
										id="order"
										class="tag tag-rounded tag-primary"
									>
										100
									</span>
								</span>
							</div>
						</div>
						<div class="col-6 sm-12">
							<div
								class="block justify-content-between align-items-center bg-info-light"
							>
								<span class="btn btn-lg btn-blank">
									<i
										class="GO-boxes txt-info"
										style="font-size: 50px;"
									></i>
								</span>
								<span class="btn btn-lg btn-blank">
									<span
										id="product"
										class="tag tag-rounded tag-info"
									>
										100
									</span>
								</span>
							</div>
						</div>
						<div class="col-6 sm-12">
							<div
								class="block justify-content-between align-items-center bg-danger-light"
							>
								<span class="btn btn-lg btn-blank">
									<i
										class="GO-dolly txt-danger"
										style="font-size: 50px;"
									></i>
								</span>
								<span class="btn btn-lg btn-blank">
									<span
										id="stock"
										class="tag tag-rounded tag-danger"
									>
										100
									</span>
								</span>
							</div>
						</div>
					</div>
					<div class="break-six"></div>
					<div class="block">
						<div class="col-12">
							<h1 class="title-three">
								<i
									class="GO-cog"
									style="font-size: 32px;"
								></i>
								Reglage
							</h1>
						</div>
						<div class="break-five"></div>
						<form id="passForm" class="block">
							<div class="col-12">
								<h1 class="title-five">
									Ancien Mot De Passe
								</h1>
							</div>
							<div class="col-12">
								<input
									type="password"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Ancien Mot De Passe"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Nouveau Mot De Passe
								</h1>
							</div>
							<div class="col-12">
								<input
									type="password"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Nouveau Mot De Passe"
								/>
							</div>
							<div class="col-12">
								<h1 class="title-five">
									Confirmer Mot De Passe
								</h1>
							</div>
							<div class="col-12">
								<input
									type="password"
									class="formbox formbox-lg horizontal-fluid"
									placeholder="Confirmer Mot De Passe"
								/>
							</div>
							<div class="col-12">
								<button
									type="submit"
									class="btn btn-lg btn-primary horizontal-fluid"
								>
									Enregistrer
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<script src="../scripts/GO.1.0.js"></script>
		<script src="../scripts/CODE.0.0.js"></script>
		<script>
			let products = function () {
				GO.ajax({
					url: "../libs/getProducts.php",
					method: "POST",
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Products: Error");
						} else {
							console.info("Get Products: Success");
							let count = "0";
							if (data["message"] !== true) {
								count = data[
									"message"
								].length.toString();
							}
							GO("#product").text(count);
							let stock = 0;
							Array.from(data["message"]).forEach((p) => {
								if (p["quantite_produit"] < 4) {
									stock++;
								}
							});
							GO("#stock").text(stock.toString());
						}
					},
				});
			};
			let orders = function (t1, t2) {
				GO.ajax({
					url: "../libs/getOrders.php",
					method: "POST",
					success: function (data) {
						data = JSON.parse(data);
						if (data["type"] === "Error") {
							console.error("Get Orders: Error");
						} else {
							console.info("Get Orders: Success");
							let order = 0;
							Array.from(data["message"]).forEach((p) => {
								order++;
							});
							GO("#order").text(order.toString());
							let money = 0;
							Array.from(data["message"]).forEach((p) => {
								if (p["status_commande"] === "1") {
									money += parseFloat(
										p["total_commande"]
									);
								}
							});
							GO("#money").text(money.toString() + " MAD");
						}
					},
				});
			};
			window.onload = function () {
				products();
				orders();
			};
			GO("#head").include("../head.html");
		</script>
	</body>
</html>
